{% extends "maths/base.html" %}
{% block content %}
<h1>Add Question to {{ level }}</h1>

{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
{% endif %}

<div class="question-form-container">
    <form method="post">
        {% csrf_token %}
        
        <div class="form-section">
            <h3>Question Details</h3>
            <div class="form-group">
                <label for="{{ question_form.question_text.id_for_label }}">Question Text:</label>
                <div class="question-input-container">
                    {{ question_form.question_text }}
                    <button type="button" class="speaker-btn" onclick="speakText(document.getElementById('{{ question_form.question_text.id_for_label }}').value)" title="Listen to question">
                        üîä
                    </button>
                </div>
                {% if question_form.question_text.errors %}
                    <div class="error">{{ question_form.question_text.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ question_form.question_type.id_for_label }}">Question Type:</label>
                    {{ question_form.question_type }}
                </div>
                
                <div class="form-group">
                    <label for="{{ question_form.difficulty.id_for_label }}">Difficulty:</label>
                    {{ question_form.difficulty }}
                </div>
                
                <div class="form-group">
                    <label for="{{ question_form.points.id_for_label }}">Points:</label>
                    {{ question_form.points }}
                </div>
            </div>
            
            <div class="form-group">
                <label for="{{ question_form.explanation.id_for_label }}">Explanation:</label>
                {{ question_form.explanation }}
                <small>Optional explanation for the correct answer</small>
            </div>
        </div>
        
        <div class="form-section">
            <h3>Answer Options</h3>
            <div class="answers-container">
                {{ answer_formset.management_form }}
                {% for form in answer_formset %}
                    <div class="answer-form">
                        <div class="form-group">
                            <label>Answer {{ forloop.counter }}:</label>
                            {{ form.answer_text }}
                            {{ form.order.as_hidden }}
                        </div>
                        <div class="form-group checkbox-group">
                            <label>
                                {{ form.is_correct }} Correct Answer
                            </label>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Add Question</button>
            <a href="{% url 'maths:level_questions' level.level_number %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<style>
    .question-form-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .form-section {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .form-section h3 {
        margin-top: 0;
        color: #495057;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }
    
    .form-group {
        margin: 15px 0;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #495057;
    }
    
    .form-group input, .form-group textarea, .form-group select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ced4da;
        border-radius: 4px;
        font-size: 16px;
    }
    
    .form-group textarea {
        resize: vertical;
        min-height: 100px;
    }
    
    .question-input-container {
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }
    
    .question-input-container textarea {
        flex: 1;
        resize: vertical;
        min-height: 100px;
    }
    
    .speaker-btn {
        background: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .speaker-btn:hover {
        background: #0056b3;
        transform: scale(1.1);
    }
    
    .speaker-btn:active {
        transform: scale(0.95);
    }
    
    .speaker-btn.playing {
        background: #28a745;
        animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
    }
    
    .answers-container {
        display: grid;
        gap: 15px;
    }
    
    .answer-form {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 6px;
        padding: 15px;
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 15px;
        align-items: end;
    }
    
    .checkbox-group {
        margin: 0;
        text-align: center;
    }
    
    .checkbox-group label {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        font-weight: normal;
    }
    
    .checkbox-group input[type="checkbox"] {
        width: auto;
        margin-right: 8px;
    }
    
    .form-actions {
        text-align: center;
        margin: 30px 0;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 0 10px;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn:hover {
        opacity: 0.8;
    }
    
    .error {
        color: #dc3545;
        font-size: 14px;
        margin-top: 5px;
    }
    
    .alert {
        padding: 10px 15px;
        margin: 15px 0;
        border-radius: 4px;
    }
    
    .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
    
    .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }
    
    small {
        color: #6c757d;
        font-size: 12px;
    }
    
    @media (max-width: 768px) {
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .answer-form {
            grid-template-columns: 1fr;
        }
    }
</style>

<script>
let currentSpeech = null;

function speakText(text) {
    if (!text.trim()) {
        alert('Please enter some text to listen to.');
        return;
    }
    
    // Stop any current speech
    if (currentSpeech) {
        speechSynthesis.cancel();
        currentSpeech = null;
        updateSpeakerButtons();
        return;
    }
    
    // Check if speech synthesis is supported
    if (!('speechSynthesis' in window)) {
        alert('Text-to-speech is not supported in this browser.');
        return;
    }
    
    // Create speech utterance
    const utterance = new SpeechSynthesisUtterance(text);
    
    // Configure speech settings
    utterance.rate = 0.8; // Slightly slower for better comprehension
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Try to use a child-friendly voice
    const voices = speechSynthesis.getVoices();
    const childVoice = voices.find(voice => 
        voice.name.includes('Child') || 
        voice.name.includes('Kid') ||
        voice.lang.startsWith('en') && voice.name.includes('Female')
    );
    
    if (childVoice) {
        utterance.voice = childVoice;
    }
    
    // Event handlers
    utterance.onstart = function() {
        currentSpeech = utterance;
        updateSpeakerButtons();
    };
    
    utterance.onend = function() {
        currentSpeech = null;
        updateSpeakerButtons();
    };
    
    utterance.onerror = function() {
        currentSpeech = null;
        updateSpeakerButtons();
        alert('Error playing audio. Please try again.');
    };
    
    // Start speaking
    speechSynthesis.speak(utterance);
}

function updateSpeakerButtons() {
    const buttons = document.querySelectorAll('.speaker-btn');
    buttons.forEach(btn => {
        if (currentSpeech) {
            btn.classList.add('playing');
            btn.innerHTML = '‚èπÔ∏è';
            btn.title = 'Stop audio';
        } else {
            btn.classList.remove('playing');
            btn.innerHTML = 'üîä';
            btn.title = 'Listen to question';
        }
    });
}

// Load voices when page loads
window.addEventListener('load', function() {
    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices();
    }
});
</script>
{% endblock %}
<!doctype html>
<html>
<head><meta charset="utf-8"><title>Maths Practice</title></head>
<body>
  <nav>
    <a href="{% url 'maths:dashboard' %}">Home</a> |
    <a href="{% url 'maths:dashboard' %}">Dashboard</a> |
    <a href="{% url 'maths:topics' %}">Topics</a> |
    {% if user.is_authenticated %}
      {% if user.is_teacher %}
        <a href="{% url 'maths:create_class' %}">Create class</a> |
      {% else %}
        <a href="{% url 'maths:join_class' %}">Join class</a> |
      {% endif %}
      <a href="{% url 'logout' %}">Logout</a> |
      <a href="/admin/">Admin</a>
    {% else %}
      <a href="{% url 'maths:signup_student' %}">Sign up (Student)</a> |
      <a href="{% url 'maths:signup_teacher' %}">Sign up (Teacher)</a> |
      <a href="{% url 'login' %}">Login</a>
    {% endif %}
  </nav>
  <hr>
  {% block content %}{% endblock %}
</body>
</html>
{% extends "maths/base.html" %}
{% block content %}
  <h1>Bulk Student Registration</h1>
  
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
  
  <div class="bulk-registration-form">
    <p>Register multiple students at once for your classes.</p>
    
    <form method="post">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="{{ form.student_data.id_for_label }}">Student Information:</label>
        {{ form.student_data }}
        {% if form.student_data.errors %}
          <div class="error">{{ form.student_data.errors }}</div>
        {% endif %}
        <small class="help-text">{{ form.student_data.help_text }}</small>
      </div>
      
      <div class="example">
        <h4>Example format:</h4>
        <pre>john_doe,john@example.com,password123
jane_smith,jane@example.com,mypassword456
bob_wilson,bob@example.com,securepass789</pre>
      </div>
      
      <button type="submit" class="btn btn-primary">Create Student Accounts</button>
    </form>
    
    <div class="back-link">
      <a href="{% url 'maths:dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
    </div>
  </div>
  
  <style>
    .bulk-registration-form {
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .form-group {
      margin: 20px 0;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .form-group textarea {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      font-family: monospace;
    }
    
    .help-text {
      color: #6c757d;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .example {
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 4px;
    }
    
    .example h4 {
      margin-top: 0;
      color: #495057;
    }
    
    .example pre {
      background: #fff;
      padding: 10px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-size: 14px;
      margin: 0;
    }
    
    .btn {
      display: inline-block;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 5px 0 0;
    }
    
    .btn-primary {
      background: #007bff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #0056b3;
    }
    
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #545b62;
    }
    
    .error {
      color: #dc3545;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .alert {
      padding: 10px 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .back-link {
      margin-top: 30px;
      text-align: center;
    }
  </style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
  <h1>Create Class</h1>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Create</button>
  </form>
  <p><a href="{% url '\''maths:dashboard'\'' %}">Back</a></p>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
  <h1>Register as Individual Student</h1>
  
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
  
  <div class="registration-form">
    <p>Create a personal account to access all available levels and join classes.</p>
    
    <form method="post">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="{{ form.username.id_for_label }}">Username:</label>
        {{ form.username }}
        {% if form.username.errors %}
          <div class="error">{{ form.username.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.email.id_for_label }}">Email:</label>
        {{ form.email }}
        {% if form.email.errors %}
          <div class="error">{{ form.email.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.password1.id_for_label }}">Password:</label>
        {{ form.password1 }}
        {% if form.password1.errors %}
          <div class="error">{{ form.password1.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.password2.id_for_label }}">Confirm Password:</label>
        {{ form.password2 }}
        {% if form.password2.errors %}
          <div class="error">{{ form.password2.errors }}</div>
        {% endif %}
      </div>
      
      <button type="submit" class="btn btn-secondary">Register as Student</button>
    </form>
    
    <p class="login-link">
      Already have an account? <a href="{% url 'maths:join_class' %}">Join a class</a>
    </p>
  </div>
  
  <style>
    .registration-form {
      max-width: 500px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .form-group {
      margin: 15px 0;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .form-group input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .btn {
      display: inline-block;
      padding: 10px 20px;
      background: #6c757d;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    
    .btn:hover {
      background: #545b62;
    }
    
    .error {
      color: #dc3545;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .alert {
      padding: 10px 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .login-link {
      margin-top: 20px;
      text-align: center;
    }
    
    .login-link a {
      color: #007bff;
      text-decoration: none;
    }
    
    .login-link a:hover {
      text-decoration: underline;
    }
  </style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
  <h1>Join Class</h1>
  
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
  
  <div class="registration-options">
    <h2>Choose Registration Type</h2>
    
    <div class="registration-cards">
      <div class="registration-card">
        <h3>?? Register as Center/Teacher</h3>
        <p>Create a center or school account to manage multiple classes and students.</p>
        <ul>
          <li>Create and manage multiple classes</li>
          <li>Assign specific levels to each student</li>
          <li>Bulk register students</li>
          <li>Track student progress</li>
        </ul>
        <a href="{% url 'maths:teacher_center_registration' %}" class="btn btn-primary">Register as Teacher</a>
      </div>
      
      <div class="registration-card">
        <h3>?? Register as Individual Student</h3>
        <p>Create a personal account to access all available levels.</p>
        <ul>
          <li>Access to all levels</li>
          <li>Self-paced learning</li>
          <li>Personal progress tracking</li>
          <li>Can join classes with class codes</li>
        </ul>
        <a href="{% url 'maths:individual_student_registration' %}" class="btn btn-secondary">Register as Student</a>
      </div>
    </div>
    
    <div class="join-existing">
      <h3>Already have an account?</h3>
      <p>Join an existing class using your class code:</p>
      <form method="post" class="join-form">
        {% csrf_token %}
        <div class="form-group">
          <label for="code">Class Code:</label>
          <input id="code" name="code" required class="form-control" placeholder="Enter class code">
        </div>
        <button type="submit" class="btn btn-success">Join Class</button>
      </form>
    </div>
  </div>
  
  <style>
    .registration-options {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .registration-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }
    
    .registration-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
    }
    
    .registration-card h3 {
      margin-top: 0;
      color: #333;
    }
    
    .registration-card ul {
      margin: 15px 0;
      padding-left: 20px;
    }
    
    .registration-card li {
      margin: 5px 0;
    }
    
    .btn {
      display: inline-block;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    
    .btn-primary {
      background: #007bff;
      color: white;
    }
    
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    
    .btn-success {
      background: #28a745;
      color: white;
    }
    
    .join-existing {
      margin-top: 40px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fff;
    }
    
    .form-group {
      margin: 15px 0;
    }
    
    .form-control {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .alert {
      padding: 10px 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    @media (max-width: 768px) {
      .registration-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>Year {{ level.level_number }} Mathematics</h1>

<div class="level-content">
    <div class="level-info">
        <h2>{{ level.title }}</h2>
        <p class="level-description">
            Welcome to Year {{ level.level_number }} Mathematics! 
            This level covers essential mathematical concepts for your grade level.
        </p>
        {% if topics %}
            <div class="topics-list">
                <h4>üìö Topics Covered:</h4>
                <div class="topics-grid">
                    {% for topic in topics %}
                        <div class="topic-badge">
                            {{ topic.name }}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
    
    <div class="level-sections">
        <div class="section">
            <h3>üìñ Learning Materials</h3>
            <p>Interactive lessons and exercises will be available here.</p>
            <div class="action-buttons">
                <a href="{% url 'maths:measurements_questions' level.level_number %}" class="btn btn-outline">Measurements</a>
            </div>
            <div class="placeholder">
                <p>üöß More content coming soon!</p>
            </div>
        </div>
        
        <div class="section">
            <h3>üìä Take Quiz</h3>
            <p>Test your knowledge with a timed quiz.</p>
            <div class="action-buttons">
                <a href="{% url 'maths:take_quiz' level.level_number %}" class="btn btn-outline">Start Quiz</a>
            </div>
        </div>
    </div>
</div>

<div class="navigation">
    <a href="{% url 'maths:topics' %}" class="btn btn-secondary">Back to Topics</a>
    <a href="{% url 'maths:topics' %}" class="btn btn-info">All Topics</a>
    <a href="{% url 'maths:dashboard' %}" class="btn btn-primary">Dashboard</a>
</div>

<style>
    .level-content {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .level-info {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        margin-bottom: 30px;
    }
    
    .level-info h2 {
        margin-top: 0;
        font-size: 28px;
    }
    
    .level-description {
        font-size: 16px;
        margin-bottom: 0;
        opacity: 0.9;
    }
    
    .topics-list {
        margin-top: 20px;
    }
    
    .topics-list h4 {
        margin-bottom: 15px;
        color: white;
        font-size: 18px;
    }
    
    .topics-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    
    .topic-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .level-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .section {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
    }
    
    .section h3 {
        color: #495057;
        margin-top: 0;
        margin-bottom: 15px;
    }
    
    .section p {
        color: #6c757d;
        margin-bottom: 15px;
    }
    
    .placeholder {
        background: #e9ecef;
        border: 2px dashed #adb5bd;
        border-radius: 6px;
        padding: 20px;
        color: #6c757d;
        font-style: italic;
    }
    
    .action-buttons {
        margin-top: 15px;
    }
    
    .btn-outline {
        display: inline-block;
        padding: 8px 16px;
        background: transparent;
        color: #007bff;
        border: 2px solid #007bff;
        border-radius: 4px;
        text-decoration: none;
        font-size: 14px;
        margin: 5px;
        transition: all 0.2s ease;
    }
    
    .btn-outline:hover {
        background: #007bff;
        color: white;
    }
    
    .navigation {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        margin: 5px;
        font-weight: 500;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-info {
        background: #17a2b8;
        color: white;
    }
    
    .btn:hover {
        opacity: 0.8;
    }
    
    @media (max-width: 768px) {
        .level-sections {
            grid-template-columns: 1fr;
        }
        
        .navigation .btn {
            display: block;
            margin: 10px auto;
            max-width: 200px;
        }
    }
</style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>{{ level }} - Questions</h1>

<div class="questions-container">
    {% if questions %}
        <div class="questions-header">
            <h2>{{ questions.count }} Question{{ questions.count|pluralize }}</h2>
            {% if user.is_teacher %}
                <a href="{% url 'maths:add_question' level.level_number %}" class="btn btn-primary">Add New Question</a>
            {% endif %}
        </div>
        
        <div class="questions-list">
            {% for question in questions %}
                <div class="question-card">
                    <div class="question-header">
                        <h3>Question {{ forloop.counter }}</h3>
                        <div class="question-meta">
                            <span class="difficulty difficulty-{{ question.difficulty }}">
                                {% if question.difficulty == 1 %}Easy{% elif question.difficulty == 2 %}Medium{% else %}Hard{% endif %}
                            </span>
                            <span class="points">{{ question.points }} point{{ question.points|pluralize }}</span>
                            <span class="type">{{ question.get_question_type_display }}</span>
                        </div>
                    </div>
                    
                    <div class="question-content">
                        <div class="question-text-container">
                            <p class="question-text">{{ question.question_text }}</p>
                            <button class="speaker-btn" onclick="speakText('{{ question.question_text|escapejs }}')" title="Listen to question">
                                üîä
                            </button>
                        </div>
                        
                        {% if question.answers.exists %}
                            <div class="answers">
                                <h4>Answer Options:</h4>
                                <ul>
                                    {% for answer in question.answers.all %}
                                        <li class="answer-option {% if answer.is_correct %}correct{% endif %}">
                                            {{ answer.answer_text }}
                                            {% if answer.is_correct %}<span class="correct-indicator">‚úì</span>{% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                        
                        {% if question.explanation %}
                            <div class="explanation">
                                <h4>Explanation:</h4>
                                <p>{{ question.explanation }}</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
        
        {% if not user.is_teacher and questions.exists %}
            <div class="quiz-actions">
                <a href="{% url 'maths:take_quiz' level.level_number %}" class="btn btn-success btn-large">Take Quiz</a>
            </div>
        {% endif %}
    {% else %}
        <div class="no-questions">
            <h2>No Questions Available</h2>
            <p>There are no questions for {{ level }} yet.</p>
            {% if user.is_teacher %}
                <a href="{% url 'maths:add_question' level.level_number %}" class="btn btn-primary">Add First Question</a>
            {% endif %}
        </div>
    {% endif %}
</div>

<div class="navigation">
    <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-secondary">Back to {{ level }}</a>
    <a href="{% url 'maths:topics' %}" class="btn btn-info">All Topics</a>
</div>

<style>
    .questions-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .questions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .questions-header h2 {
        margin: 0;
        color: #495057;
    }
    
    .questions-list {
        display: grid;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .question-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .question-header h3 {
        margin: 0;
        color: #007bff;
    }
    
    .question-meta {
        display: flex;
        gap: 10px;
        font-size: 14px;
    }
    
    .difficulty {
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .difficulty-1 {
        background: #d4edda;
        color: #155724;
    }
    
    .difficulty-2 {
        background: #fff3cd;
        color: #856404;
    }
    
    .difficulty-3 {
        background: #f8d7da;
        color: #721c24;
    }
    
    .points {
        background: #e2e3e5;
        color: #495057;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    .type {
        background: #d1ecf1;
        color: #0c5460;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    .question-content {
        margin-top: 15px;
    }
    
    .question-text-container {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .question-text {
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        color: #333;
        flex: 1;
    }
    
    .speaker-btn {
        background: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .speaker-btn:hover {
        background: #0056b3;
        transform: scale(1.1);
    }
    
    .speaker-btn:active {
        transform: scale(0.95);
    }
    
    .speaker-btn.playing {
        background: #28a745;
        animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .answers {
        margin: 15px 0;
    }
    
    .answers h4 {
        margin-bottom: 10px;
        color: #495057;
    }
    
    .answers ul {
        list-style: none;
        padding: 0;
    }
    
    .answer-option {
        padding: 8px 12px;
        margin: 5px 0;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .answer-option.correct {
        background: #d4edda;
        border-color: #c3e6cb;
        color: #155724;
    }
    
    .correct-indicator {
        color: #28a745;
        font-weight: bold;
    }
    
    .explanation {
        margin-top: 15px;
        padding: 15px;
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        border-radius: 4px;
    }
    
    .explanation h4 {
        margin-top: 0;
        color: #1976d2;
    }
    
    .quiz-actions {
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .no-questions {
        text-align: center;
        padding: 40px;
        color: #6c757d;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-info {
        background: #17a2b8;
        color: white;
    }
    
    .btn-success {
        background: #28a745;
        color: white;
    }
    
    .btn-large {
        padding: 15px 30px;
        font-size: 18px;
    }
    
    .btn:hover {
        opacity: 0.8;
    }
    
    .navigation {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
    }
    
    @media (max-width: 768px) {
        .questions-header {
            flex-direction: column;
            gap: 15px;
        }
        
        .question-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .question-meta {
            flex-wrap: wrap;
        }
    }
</style>

<script>
let currentSpeech = null;

function speakText(text) {
    // Stop any current speech
    if (currentSpeech) {
        speechSynthesis.cancel();
        currentSpeech = null;
        updateSpeakerButtons();
        return;
    }
    
    // Check if speech synthesis is supported
    if (!('speechSynthesis' in window)) {
        alert('Text-to-speech is not supported in this browser.');
        return;
    }
    
    // Create speech utterance
    const utterance = new SpeechSynthesisUtterance(text);
    
    // Configure speech settings
    utterance.rate = 0.8; // Slightly slower for better comprehension
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Try to use a child-friendly voice
    const voices = speechSynthesis.getVoices();
    const childVoice = voices.find(voice => 
        voice.name.includes('Child') || 
        voice.name.includes('Kid') ||
        voice.lang.startsWith('en') && voice.name.includes('Female')
    );
    
    if (childVoice) {
        utterance.voice = childVoice;
    }
    
    // Event handlers
    utterance.onstart = function() {
        currentSpeech = utterance;
        updateSpeakerButtons();
    };
    
    utterance.onend = function() {
        currentSpeech = null;
        updateSpeakerButtons();
    };
    
    utterance.onerror = function() {
        currentSpeech = null;
        updateSpeakerButtons();
        alert('Error playing audio. Please try again.');
    };
    
    // Start speaking
    speechSynthesis.speak(utterance);
}

function updateSpeakerButtons() {
    const buttons = document.querySelectorAll('.speaker-btn');
    buttons.forEach(btn => {
        if (currentSpeech) {
            btn.classList.add('playing');
            btn.innerHTML = '‚èπÔ∏è';
            btn.title = 'Stop audio';
        } else {
            btn.classList.remove('playing');
            btn.innerHTML = 'üîä';
            btn.title = 'Listen to question';
        }
    });
}

// Load voices when page loads
window.addEventListener('load', function() {
    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices();
    }
});
</script>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>{{ level }} - {{ topic.name }}</h1>

<div class="measurements-container">
    <div class="measurements-header">
        <h2>üìè {{ topic.name }} Questions</h2>
        <div class="progress-info">
            <p>Question {{ question_number }} of {{ total_questions }}</p>
            <div class="progress-bar">
                <div class="progress-fill" data-width="{% widthratio question_number total_questions 100 %}"></div>
            </div>
        </div>
    </div>
    
    <div class="question-container">
        <div class="question-card">
            <div class="question-header">
                <h3>Question {{ question_number }}</h3>
                <div class="question-meta">
                    <span class="difficulty difficulty-{{ current_question.difficulty }}">
                        {% if current_question.difficulty == 1 %}Easy{% elif current_question.difficulty == 2 %}Medium{% else %}Hard{% endif %}
                    </span>
                    <span class="points">{{ current_question.points }} point{{ current_question.points|pluralize }}</span>
                </div>
            </div>
            
            <div class="question-content">
                <div class="question-text-container">
                    {% if current_question.image %}
                        <img src="{{ current_question.image.url }}" alt="Question diagram" class="question-image">
                    {% endif %}
                    <p class="question-text">{{ current_question.question_text|safe }}</p>
                    <button class="speaker-btn" onclick="speakText('{{ current_question.question_text|escapejs }}')" title="Listen to question">
                        üîä
                    </button>
                </div>
                
                {% if not checked %}
                    <!-- Answer Selection Form -->
                    {% if current_question.question_type == 'multiple_choice' and current_question.answers.exists %}
                        <div class="answers">
                            <h4>Choose your answer:</h4>
                            <form method="post" class="answer-form">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="check_answer">
                                <input type="hidden" name="question_id" value="{{ current_question.id }}">
                                <ul class="answer-options">
                                    {% for answer in current_question.answers.all %}
                                        <li class="answer-option">
                                            <label class="answer-label">
                                                <input type="radio" name="answer_id" value="{{ answer.id }}" required>
                                                <span class="answer-text">{{ answer.answer_text }}</span>
                                            </label>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <button type="submit" class="btn btn-primary btn-large">Check Answer</button>
                            </form>
                        </div>
                    {% elif current_question.question_type == 'true_false' %}
                        <div class="answers">
                            <h4>Choose your answer:</h4>
                            <form method="post" class="answer-form">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="check_answer">
                                <input type="hidden" name="question_id" value="{{ current_question.id }}">
                                <ul class="answer-options">
                                    {% for answer in current_question.answers.all %}
                                        <li class="answer-option">
                                            <label class="answer-label">
                                                <input type="radio" name="answer_id" value="{{ answer.id }}" required>
                                                <span class="answer-text">{{ answer.answer_text }}</span>
                                            </label>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <button type="submit" class="btn btn-primary btn-large">Check Answer</button>
                            </form>
                        </div>
                    {% endif %}
                {% else %}
                    <!-- Answer Result Display -->
                    <div class="answer-result">
                        {% if selected_answer.is_correct %}
                            <div class="result-correct">
                                <h4>‚úÖ Correct!</h4>
                                <p>Well done! You earned {{ current_question.points }} point{{ current_question.points|pluralize }}!</p>
                            </div>
                        {% else %}
                            <div class="result-incorrect">
                                <h4>‚ùå Incorrect</h4>
                                <p>Your answer: <strong>{{ selected_answer.answer_text }}</strong></p>
                                {% for answer in current_question.answers.all %}
                                    {% if answer.is_correct %}
                                        <p>Correct answer: <strong>{{ answer.answer_text }}</strong></p>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                        
                        {% if current_question.explanation %}
                            <div class="explanation">
                                <h4>üí° Explanation:</h4>
                                <p>{{ current_question.explanation }}</p>
                            </div>
                        {% endif %}
                        
                        <div class="next-question-section">
                            <form method="post" class="next-form">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="next_question">
                                {% if is_last_question %}
                                    <button type="submit" class="btn btn-success btn-large">Complete Measurements</button>
                                {% else %}
                                    <button type="submit" class="btn btn-success btn-large">Next Question</button>
                                {% endif %}
                            </form>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="navigation-actions">
        <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-secondary">Back to Year {{ level.level_number }}</a>
    </div>
</div>

<style>
    .measurements-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .measurements-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        color: white;
        border-radius: 10px;
    }
    
    .measurements-header h2 {
        margin-top: 0;
        font-size: 28px;
    }
    
    .progress-info {
        margin-top: 15px;
    }
    
    .progress-info p {
        margin-bottom: 10px;
        font-size: 16px;
        opacity: 0.9;
    }
    
    .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
        overflow: hidden;
    }
    
    .progress-fill {
        height: 100%;
        background: #28a745;
        transition: width 0.3s ease;
    }
    
    .question-container {
        margin-bottom: 30px;
    }
    
    .question-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .question-header h3 {
        margin: 0;
        color: #17a2b8;
        font-size: 24px;
    }
    
    .question-meta {
        display: flex;
        gap: 10px;
        font-size: 14px;
    }
    
    .difficulty {
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .difficulty-1 {
        background: #d4edda;
        color: #155724;
    }
    
    .difficulty-2 {
        background: #fff3cd;
        color: #856404;
    }
    
    .difficulty-3 {
        background: #f8d7da;
        color: #721c24;
    }
    
    .points {
        background: #e2e3e5;
        color: #495057;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    .question-content {
        margin-top: 20px;
    }
    
    .question-text-container {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        margin-bottom: 25px;
    }
    
    .question-text {
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        color: #333;
        flex: 1;
        white-space: pre-wrap;
        font-family: 'Courier New', monospace;
    }
    
    .question-image {
        max-width: 100%;
        height: auto;
        margin-bottom: 20px;
        border: 2px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .speaker-btn {
        background: #17a2b8;
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        font-size: 18px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .speaker-btn:hover {
        background: #138496;
        transform: scale(1.1);
    }
    
    .speaker-btn.playing {
        background: #28a745;
        animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .answers h4 {
        margin-bottom: 15px;
        color: #495057;
        font-size: 18px;
    }
    
    .answer-options {
        list-style: none;
        padding: 0;
        margin-bottom: 20px;
    }
    
    .answer-option {
        margin: 10px 0;
    }
    
    .answer-label {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .answer-label:hover {
        background: #e9ecef;
        border-color: #17a2b8;
    }
    
    .answer-label input[type="radio"] {
        margin-right: 15px;
        transform: scale(1.3);
    }
    
    .answer-label input[type="radio"]:checked + .answer-text {
        font-weight: bold;
        color: #17a2b8;
    }
    
    .answer-label:has(input[type="radio"]:checked) {
        background: #e3f2fd;
        border-color: #17a2b8;
    }
    
    .answer-text {
        flex: 1;
        font-size: 16px;
    }
    
    .answer-result {
        margin-top: 20px;
    }
    
    .result-correct {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    
    .result-incorrect {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    
    .result-correct h4,
    .result-incorrect h4 {
        margin-top: 0;
        font-size: 20px;
    }
    
    .explanation {
        margin: 20px 0;
        padding: 20px;
        background: #e3f2fd;
        border-left: 4px solid #17a2b8;
        border-radius: 4px;
    }
    
    .explanation h4 {
        margin-top: 0;
        color: #138496;
    }
    
    .next-question-section {
        text-align: center;
        margin-top: 25px;
    }
    
    .navigation-actions {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .btn {
        display: inline-block;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
        transition: all 0.2s ease;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-success {
        background: #28a745;
        color: white;
    }
    
    .btn-large {
        padding: 15px 30px;
        font-size: 18px;
    }
    
    .btn:hover {
        opacity: 0.8;
        transform: translateY(-1px);
    }
    
    @media (max-width: 768px) {
        .question-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .question-meta {
            flex-wrap: wrap;
        }
        
        .question-text-container {
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
    }
</style>

<script>
let currentSpeech = null;

function speakText(text) {
    // Stop any current speech
    if (currentSpeech) {
        speechSynthesis.cancel();
        currentSpeech = null;
        updateSpeakerButtons();
        return;
    }
    
    // Check if speech synthesis is supported
    if (!('speechSynthesis' in window)) {
        alert('Text-to-speech is not supported in this browser.');
        return;
    }
    
    // Strip HTML tags from text for speech
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = text;
    const plainText = tempDiv.textContent || tempDiv.innerText || '';
    
    // Create speech utterance
    const utterance = new SpeechSynthesisUtterance(plainText);
    
    // Configure speech settings
    utterance.rate = 0.8; // Slightly slower for better comprehension
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Try to use a child-friendly voice
    const voices = speechSynthesis.getVoices();
    const childVoice = voices.find(voice => 
        voice.name.includes('Child') || 
        voice.name.includes('Kid') ||
        voice.lang.startsWith('en') && voice.name.includes('Female')
    );
    
    if (childVoice) {
        utterance.voice = childVoice;
    }
    
    // Event handlers
    utterance.onstart = function() {
        currentSpeech = utterance;
        updateSpeakerButtons();
    };
    
    utterance.onend = function() {
        currentSpeech = null;
        updateSpeakerButtons();
    };
    
    utterance.onerror = function() {
        currentSpeech = null;
        updateSpeakerButtons();
        alert('Error playing audio. Please try again.');
    };
    
    // Start speaking
    speechSynthesis.speak(utterance);
}

function updateSpeakerButtons() {
    const buttons = document.querySelectorAll('.speaker-btn');
    buttons.forEach(btn => {
        if (currentSpeech) {
            btn.classList.add('playing');
            btn.innerHTML = '‚èπÔ∏è';
            btn.title = 'Stop audio';
        } else {
            btn.classList.remove('playing');
            btn.innerHTML = 'üîä';
            btn.title = 'Listen to question';
        }
    });
}

// Load voices when page loads
window.addEventListener('load', function() {
    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices();
    }
    
    // Set progress bar width from data attribute
    const progressFill = document.querySelector('.progress-fill');
    if (progressFill && progressFill.dataset.width) {
        progressFill.style.width = progressFill.dataset.width + '%';
    }
});
</script>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>{{ level }} - Practice Questions</h1>

<div class="practice-container">
    {% if questions %}
        <div class="practice-header">
            <h2>üéØ Practice Session</h2>
            <p class="practice-info">
                {{ questions|length }} random question{{ questions|length|pluralize }} 
                (from {{ total_questions }} total questions)
            </p>
            <p class="practice-description">
                Practice with questions from all topics. No scoring - just learning!
            </p>
        </div>
        
        <div class="questions-container">
            {% for question in questions %}
                <div class="question-card">
                    <div class="question-header">
                        <h3>Question {{ forloop.counter }}</h3>
                        <div class="question-meta">
                            <span class="difficulty difficulty-{{ question.difficulty }}">
                                {% if question.difficulty == 1 %}Easy{% elif question.difficulty == 2 %}Medium{% else %}Hard{% endif %}
                            </span>
                            <span class="points">{{ question.points }} point{{ question.points|pluralize }}</span>
                        </div>
                    </div>
                    
                    <div class="question-content">
                        <div class="question-text-container">
                            <p class="question-text">{{ question.question_text }}</p>
                            <button class="speaker-btn" onclick="speakText('{{ question.question_text|escapejs }}')" title="Listen to question">
                                üîä
                            </button>
                        </div>
                        
                        {% if question.question_type == 'multiple_choice' and question.answers.exists %}
                            <div class="answers">
                                <h4>Answer Options:</h4>
                                <ul>
                                    {% for answer in question.answers.all %}
                                        <li class="answer-option {% if answer.is_correct %}correct{% endif %}">
                                            {{ answer.answer_text }}
                                            {% if answer.is_correct %}<span class="correct-indicator">‚úì</span>{% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% elif question.question_type == 'true_false' %}
                            <div class="answers">
                                <h4>Answer:</h4>
                                <ul>
                                    {% for answer in question.answers.all %}
                                        <li class="answer-option {% if answer.is_correct %}correct{% endif %}">
                                            {{ answer.answer_text }}
                                            {% if answer.is_correct %}<span class="correct-indicator">‚úì</span>{% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                        
                        {% if question.explanation %}
                            <div class="explanation">
                                <h4>üí° Explanation:</h4>
                                <p>{{ question.explanation }}</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <div class="practice-actions">
            <a href="{% url 'maths:practice_questions' level.level_number %}" class="btn btn-primary">New Practice Set</a>
            <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-secondary">Back to Level</a>
        </div>
    {% else %}
        <div class="no-questions">
            <h2>No Questions Available</h2>
            <p>There are no questions for practice yet.</p>
            <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-primary">Back to Level</a>
        </div>
    {% endif %}
</div>

<style>
    .practice-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .practice-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border-radius: 10px;
    }
    
    .practice-header h2 {
        margin-top: 0;
        font-size: 28px;
    }
    
    .practice-info {
        margin-bottom: 10px;
        opacity: 0.9;
        font-size: 16px;
    }
    
    .practice-description {
        margin-bottom: 0;
        opacity: 0.8;
        font-size: 14px;
    }
    
    .questions-container {
        display: grid;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .question-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .question-header h3 {
        margin: 0;
        color: #007bff;
    }
    
    .question-meta {
        display: flex;
        gap: 10px;
        font-size: 14px;
    }
    
    .difficulty {
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .difficulty-1 {
        background: #d4edda;
        color: #155724;
    }
    
    .difficulty-2 {
        background: #fff3cd;
        color: #856404;
    }
    
    .difficulty-3 {
        background: #f8d7da;
        color: #721c24;
    }
    
    .points {
        background: #e2e3e5;
        color: #495057;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    .question-content {
        margin-top: 15px;
    }
    
    .question-text-container {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .question-text {
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        color: #333;
        flex: 1;
    }
    
    .speaker-btn {
        background: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .speaker-btn:hover {
        background: #0056b3;
        transform: scale(1.1);
    }
    
    .speaker-btn.playing {
        background: #28a745;
        animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .answers {
        margin: 15px 0;
    }
    
    .answers h4 {
        margin-bottom: 10px;
        color: #495057;
    }
    
    .answers ul {
        list-style: none;
        padding: 0;
    }
    
    .answer-option {
        padding: 8px 12px;
        margin: 5px 0;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .answer-option.correct {
        background: #d4edda;
        border-color: #c3e6cb;
        color: #155724;
    }
    
    .correct-indicator {
        color: #28a745;
        font-weight: bold;
    }
    
    .explanation {
        margin-top: 15px;
        padding: 15px;
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        border-radius: 4px;
    }
    
    .explanation h4 {
        margin-top: 0;
        color: #1976d2;
    }
    
    .practice-actions {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .no-questions {
        text-align: center;
        padding: 40px;
        color: #6c757d;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn:hover {
        opacity: 0.8;
    }
    
    @media (max-width: 768px) {
        .question-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .question-meta {
            flex-wrap: wrap;
        }
    }
</style>

<script>
let currentSpeech = null;

function speakText(text) {
    // Stop any current speech
    if (currentSpeech) {
        speechSynthesis.cancel();
        currentSpeech = null;
        updateSpeakerButtons();
        return;
    }
    
    // Check if speech synthesis is supported
    if (!('speechSynthesis' in window)) {
        alert('Text-to-speech is not supported in this browser.');
        return;
    }
    
    // Create speech utterance
    const utterance = new SpeechSynthesisUtterance(text);
    
    // Configure speech settings
    utterance.rate = 0.8; // Slightly slower for better comprehension
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Try to use a child-friendly voice
    const voices = speechSynthesis.getVoices();
    const childVoice = voices.find(voice => 
        voice.name.includes('Child') || 
        voice.name.includes('Kid') ||
        voice.lang.startsWith('en') && voice.name.includes('Female')
    );
    
    if (childVoice) {
        utterance.voice = childVoice;
    }
    
    // Event handlers
    utterance.onstart = function() {
        currentSpeech = utterance;
        updateSpeakerButtons();
    };
    
    utterance.onend = function() {
        currentSpeech = null;
        updateSpeakerButtons();
    };
    
    utterance.onerror = function() {
        currentSpeech = null;
        updateSpeakerButtons();
        alert('Error playing audio. Please try again.');
    };
    
    // Start speaking
    speechSynthesis.speak(utterance);
}

function updateSpeakerButtons() {
    const buttons = document.querySelectorAll('.speaker-btn');
    buttons.forEach(btn => {
        if (currentSpeech) {
            btn.classList.add('playing');
            btn.innerHTML = '‚èπÔ∏è';
            btn.title = 'Stop audio';
        } else {
            btn.classList.remove('playing');
            btn.innerHTML = 'üîä';
            btn.title = 'Listen to question';
        }
    });
}

// Load voices when page loads
window.addEventListener('load', function() {
    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices();
    }
});
</script>
{% endblock %}
<!doctype html>
<html>
<head><meta charset="utf-8"><title>{{ type }} Sign up</title></head>
<body>
  <h1>{{ type }} Sign up</h1>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Sign up</button>
  </form>
  <p><a href="{% url '\''maths:dashboard'\'' %}">Back</a></p>
</body>
</html>
{% extends "maths/base.html" %}
{% load practice_extras %}
{% block content %}
<style>
.accordion {
    max-width: 800px;
    margin: 20px auto;
}

.accordion-item {
    border: 1px solid #ddd;
    margin-bottom: 10px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.accordion-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.3s ease;
}

.accordion-header:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
}

.accordion-header::after {
    content: '+';
    font-size: 24px;
    transition: transform 0.3s ease;
}

.accordion-header.active::after {
    transform: rotate(45deg);
}

.accordion-content {
    background: #f8f9fa;
    padding: 0;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.accordion-content.active {
    max-height: 500px;
}

.topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    padding: 20px;
}

.topic-card {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 15px;
    text-align: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    cursor: pointer;
}

.topic-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.topic-card a {
    text-decoration: none;
    color: #333;
    display: block;
}

.topic-card h4 {
    margin: 0 0 10px 0;
    color: #667eea;
    font-size: 16px;
}

.topic-card p {
    margin: 0;
    color: #666;
    font-size: 14px;
}

.info-box {
    background: #e3f2fd;
    border: 1px solid #2196f3;
    border-radius: 8px;
    padding: 15px;
    margin: 20px 0;
    text-align: center;
}

.info-box a {
    color: #1976d2;
    text-decoration: none;
    font-weight: bold;
}

.info-box a:hover {
    text-decoration: underline;
}
</style>

<h1>?? Student Dashboard</h1>

<div class="info-box">
    {% if not has_class %}
        <p>?? You are a single student and can access all levels.</p>
        <p>If you have a class code, <a href="{% url 'maths:join_class' %}">join your class here</a>.</p>
    {% else %}
        <p>? You are enrolled in a class.</p>
        <p>If you need to join another class, use the <a href="{% url 'maths:join_class' %}">Join class</a> page.</p>
    {% endif %}
</div>

<div class="accordion">
    {% for year in sorted_years %}
        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                Year {{ year }} ??
            </div>
            <div class="accordion-content">
                <div class="topics-grid">
                    {% for level in levels_by_year|lookup:year %}
                        {% if level.level_number == 2 %}
                            <!-- Year 2: Show Measurements and Take Quiz -->
                            <div class="topic-card">
                                <a href="{% url 'maths:measurements_questions' level.level_number %}">
                                    <h4>Measurements</h4>
                                    <p>Year {{ level.level_number }} - Measurements</p>
                                </a>
                            </div>
                            <div class="topic-card">
                                <a href="{% url 'maths:take_quiz' level.level_number %}">
                                    <h4>Take Quiz</h4>
                                    <p>Year {{ level.level_number }} - Quiz</p>
                                </a>
                            </div>
                        {% elif level.level_number == 3 %}
                            <!-- Year 3: Show Measurements and Take Quiz -->
                            <div class="topic-card">
                                <a href="{% url 'maths:measurements_questions' level.level_number %}">
                                    <h4>Measurements</h4>
                                    <p>Year {{ level.level_number }} - Measurements</p>
                                </a>
                            </div>
                            <div class="topic-card">
                                <a href="{% url 'maths:take_quiz' level.level_number %}">
                                    <h4>Take Quiz</h4>
                                    <p>Year {{ level.level_number }} - Quiz</p>
                                </a>
                            </div>
                        {% elif level.level_number == 5 %}
                            <!-- Year 5: Show Measurements and Take Quiz -->
                            <div class="topic-card">
                                <a href="{% url 'maths:measurements_questions' level.level_number %}">
                                    <h4>Measurements</h4>
                                    <p>Year {{ level.level_number }} - L-Shaped Blocks</p>
                                </a>
                            </div>
                            <div class="topic-card">
                                <a href="{% url 'maths:take_quiz' level.level_number %}">
                                    <h4>Take Quiz</h4>
                                    <p>Year {{ level.level_number }} - Quiz</p>
                                </a>
                            </div>
                        {% elif level.level_number == 1 %}
                            <!-- Year 1: Show nothing -->
                        {% else %}
                            <!-- Other years: Show regular topic cards -->
                            {% if level.topics.exists %}
                                <div class="topic-card">
                                    <a href="{% url 'maths:level_detail' level.level_number %}">
                                        <h4>{{ level.topic_names }}</h4>
                                        <p>{{ level.title }}</p>
                                    </a>
                                </div>
                            {% else %}
                                <div class="topic-card">
                                    <a href="{% url 'maths:level_detail' level.level_number %}">
                                        <h4>Year {{ level.level_number }} Mathematics</h4>
                                        <p>{{ level.title }}</p>
                                    </a>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    {% empty %}
        <div class="info-box">
            <p>No levels available at the moment.</p>
        </div>
    {% endfor %}
</div>

<script>
function toggleAccordion(header) {
    const content = header.nextElementSibling;
    const isActive = header.classList.contains('active');
    
    // Close all accordions
    document.querySelectorAll('.accordion-header').forEach(h => {
        h.classList.remove('active');
        h.nextElementSibling.classList.remove('active');
    });
    
    // Open clicked accordion if it wasn't active
    if (!isActive) {
        header.classList.add('active');
        content.classList.add('active');
    }
}

// Open first accordion by default
document.addEventListener('DOMContentLoaded', function() {
    const firstHeader = document.querySelector('.accordion-header');
    if (firstHeader) {
        firstHeader.classList.add('active');
        firstHeader.nextElementSibling.classList.add('active');
    }
});
</script>

<p style="text-align: center; margin-top: 30px;">
    <a href="{% url 'maths:topics' %}" style="color: #667eea; text-decoration: none; font-weight: bold;">
        ?? Browse All Topics
    </a>
</p>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>{{ level }} - Quiz</h1>

<div class="quiz-container">
    {% if questions %}
        <div class="quiz-header">
            <h2>Quiz: {{ level }}</h2>
            <p class="quiz-info">{{ questions.count }} question{{ questions.count|pluralize }} ‚Ä¢ Total points: {{ questions|length }}</p>
        </div>
        
        <form method="post" class="quiz-form">
            {% csrf_token %}
            
            <div class="questions-container">
                {% for question in questions %}
                    <div class="question-card">
                        <div class="question-header">
                            <h3>Question {{ forloop.counter }}</h3>
                            <div class="question-meta">
                                <span class="points">{{ question.points }} point{{ question.points|pluralize }}</span>
                                <span class="difficulty difficulty-{{ question.difficulty }}">
                                    {% if question.difficulty == 1 %}Easy{% elif question.difficulty == 2 %}Medium{% else %}Hard{% endif %}
                                </span>
                            </div>
                        </div>
                        
                        <div class="question-content">
                            <div class="question-text-container">
                                <p class="question-text">{{ question.question_text }}</p>
                                <button class="speaker-btn" onclick="speakText('{{ question.question_text|escapejs }}')" title="Listen to question">
                                    üîä
                                </button>
                            </div>
                            
                            {% if question.question_type == 'multiple_choice' %}
                                <div class="answers">
                                    {% for answer in question.answers.all %}
                                        <div class="answer-option">
                                            <input type="radio" 
                                                   name="question_{{ question.id }}" 
                                                   value="{{ answer.id }}" 
                                                   id="answer_{{ answer.id }}"
                                                   required>
                                            <label for="answer_{{ answer.id }}">
                                                {{ answer.answer_text }}
                                            </label>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% elif question.question_type == 'true_false' %}
                                <div class="answers">
                                    <div class="answer-option">
                                        <input type="radio" 
                                               name="question_{{ question.id }}" 
                                               value="true" 
                                               id="true_{{ question.id }}"
                                               required>
                                        <label for="true_{{ question.id }}">True</label>
                                    </div>
                                    <div class="answer-option">
                                        <input type="radio" 
                                               name="question_{{ question.id }}" 
                                               value="false" 
                                               id="false_{{ question.id }}"
                                               required>
                                        <label for="false_{{ question.id }}">False</label>
                                    </div>
                                </div>
                            {% elif question.question_type == 'short_answer' %}
                                <div class="text-answer">
                                    <textarea name="question_{{ question.id }}" 
                                              placeholder="Enter your answer here..." 
                                              rows="3" 
                                              required></textarea>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
            
            <div class="quiz-actions">
                <button type="submit" class="btn btn-success btn-large">Submit Quiz</button>
                <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    {% else %}
        <div class="no-questions">
            <h2>No Questions Available</h2>
            <p>There are no questions for this quiz yet.</p>
            <a href="{% url 'maths:level_detail' level.level_number %}" class="btn btn-primary">Back to Level</a>
        </div>
    {% endif %}
</div>

<style>
    .quiz-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .quiz-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 10px;
    }
    
    .quiz-header h2 {
        margin-top: 0;
        font-size: 28px;
    }
    
    .quiz-info {
        margin-bottom: 0;
        opacity: 0.9;
        font-size: 16px;
    }
    
    .quiz-form {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
    }
    
    .questions-container {
        display: grid;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .question-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .question-header h3 {
        margin: 0;
        color: #007bff;
    }
    
    .question-meta {
        display: flex;
        gap: 10px;
        font-size: 14px;
    }
    
    .points {
        background: #e2e3e5;
        color: #495057;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    .difficulty {
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .difficulty-1 {
        background: #d4edda;
        color: #155724;
    }
    
    .difficulty-2 {
        background: #fff3cd;
        color: #856404;
    }
    
    .difficulty-3 {
        background: #f8d7da;
        color: #721c24;
    }
    
    .question-content {
        margin-top: 15px;
    }
    
    .question-text-container {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 20px;
    }
    
    .question-text {
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        color: #333;
        flex: 1;
    }
    
    .speaker-btn {
        background: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .speaker-btn:hover {
        background: #0056b3;
        transform: scale(1.1);
    }
    
    .speaker-btn:active {
        transform: scale(0.95);
    }
    
    .speaker-btn.playing {
        background: #28a745;
        animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .answers {
        display: grid;
        gap: 10px;
    }
    
    .answer-option {
        display: flex;
        align-items: center;
        padding: 10px;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    
    .answer-option:hover {
        background: #e9ecef;
    }
    
    .answer-option input[type="radio"] {
        margin-right: 10px;
        transform: scale(1.2);
    }
    
    .answer-option label {
        margin: 0;
        cursor: pointer;
        flex: 1;
        font-size: 16px;
    }
    
    .text-answer textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
        font-size: 16px;
        resize: vertical;
        min-height: 80px;
    }
    
    .quiz-actions {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
        background: white;
        border-radius: 8px;
    }
    
    .no-questions {
        text-align: center;
        padding: 40px;
        color: #6c757d;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }
    
    .btn-primary {
        background: #007bff;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-success {
        background: #28a745;
        color: white;
    }
    
    .btn-large {
        padding: 15px 30px;
        font-size: 18px;
    }
    
    .btn:hover {
        opacity: 0.8;
    }
    
    @media (max-width: 768px) {
        .question-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .question-meta {
            flex-wrap: wrap;
        }
    }
</style>

<script>
let currentSpeech = null;

function speakText(text) {
    // Stop any current speech
    if (currentSpeech) {
        speechSynthesis.cancel();
        currentSpeech = null;
        updateSpeakerButtons();
        return;
    }
    
    // Check if speech synthesis is supported
    if (!('speechSynthesis' in window)) {
        alert('Text-to-speech is not supported in this browser.');
        return;
    }
    
    // Create speech utterance
    const utterance = new SpeechSynthesisUtterance(text);
    
    // Configure speech settings
    utterance.rate = 0.8; // Slightly slower for better comprehension
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Try to use a child-friendly voice
    const voices = speechSynthesis.getVoices();
    const childVoice = voices.find(voice => 
        voice.name.includes('Child') || 
        voice.name.includes('Kid') ||
        voice.lang.startsWith('en') && voice.name.includes('Female')
    );
    
    if (childVoice) {
        utterance.voice = childVoice;
    }
    
    // Event handlers
    utterance.onstart = function() {
        currentSpeech = utterance;
        updateSpeakerButtons();
    };
    
    utterance.onend = function() {
        currentSpeech = null;
        updateSpeakerButtons();
    };
    
    utterance.onerror = function() {
        currentSpeech = null;
        updateSpeakerButtons();
        alert('Error playing audio. Please try again.');
    };
    
    // Start speaking
    speechSynthesis.speak(utterance);
}

function updateSpeakerButtons() {
    const buttons = document.querySelectorAll('.speaker-btn');
    buttons.forEach(btn => {
        if (currentSpeech) {
            btn.classList.add('playing');
            btn.innerHTML = '‚èπÔ∏è';
            btn.title = 'Stop audio';
        } else {
            btn.classList.remove('playing');
            btn.innerHTML = 'üîä';
            btn.title = 'Listen to question';
        }
    });
}

// Load voices when page loads
window.addEventListener('load', function() {
    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices();
    }
});

// Stop speech when form is submitted
document.querySelector('.quiz-form').addEventListener('submit', function() {
    if (currentSpeech) {
        speechSynthesis.cancel();
    }
});
</script>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
  <h1>Register as Center/Teacher</h1>
  
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
  
  <div class="registration-form">
    <p>Create a center or school account to manage multiple classes and students.</p>
    
    <form method="post">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="{{ form.username.id_for_label }}">Username:</label>
        {{ form.username }}
        {% if form.username.errors %}
          <div class="error">{{ form.username.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.email.id_for_label }}">Email:</label>
        {{ form.email }}
        {% if form.email.errors %}
          <div class="error">{{ form.email.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.center_name.id_for_label }}">Center/School Name:</label>
        {{ form.center_name }}
        {% if form.center_name.errors %}
          <div class="error">{{ form.center_name.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.password1.id_for_label }}">Password:</label>
        {{ form.password1 }}
        {% if form.password1.errors %}
          <div class="error">{{ form.password1.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-group">
        <label for="{{ form.password2.id_for_label }}">Confirm Password:</label>
        {{ form.password2 }}
        {% if form.password2.errors %}
          <div class="error">{{ form.password2.errors }}</div>
        {% endif %}
      </div>
      
      <button type="submit" class="btn btn-primary">Register as Teacher</button>
    </form>
    
    <p class="login-link">
      Already have an account? <a href="{% url 'maths:join_class' %}">Join a class</a>
    </p>
  </div>
  
  <style>
    .registration-form {
      max-width: 500px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .form-group {
      margin: 15px 0;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .form-group input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .btn {
      display: inline-block;
      padding: 10px 20px;
      background: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    
    .btn:hover {
      background: #0056b3;
    }
    
    .error {
      color: #dc3545;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .alert {
      padding: 10px 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .login-link {
      margin-top: 20px;
      text-align: center;
    }
    
    .login-link a {
      color: #007bff;
      text-decoration: none;
    }
    
    .login-link a:hover {
      text-decoration: underline;
    }
  </style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>Teacher Dashboard</h1>
<p>Your classes:</p>
<ul>
  {% for cls in classes %}
    <li>{{ cls.name }} (code: {{ cls.code }})</li>
  {% empty %}
    <li>No classes yet</li>
  {% endfor %}
</ul>

<div class="teacher-actions">
  <a href="{% url 'maths:create_class' %}" class="btn btn-primary">Create a new class</a>
  <a href="{% url 'maths:bulk_student_registration' %}" class="btn btn-secondary">Bulk Register Students</a>
  <a href="{% url 'maths:topics' %}" class="btn btn-info">Browse topics / assign levels</a>
</div>

<style>
  .teacher-actions {
    margin: 20px 0;
  }
  
  .btn {
    display: inline-block;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 4px;
    margin: 5px;
    font-size: 16px;
  }
  
  .btn-primary {
    background: #007bff;
    color: white;
  }
  
  .btn-secondary {
    background: #6c757d;
    color: white;
  }
  
  .btn-info {
    background: #17a2b8;
    color: white;
  }
  
  .btn:hover {
    opacity: 0.8;
  }
</style>
{% endblock %}
{% extends "maths/base.html" %}
{% block content %}
<h1>üìö Mathematics Topics</h1>

<div class="topics-container">
    {% for topic in topics %}
        <div class="topic-card">
            <h2>{{ topic.name }}</h2>
            <div class="levels-grid">
                {% for level in topic.levels.all %}
                    <div class="level-card">
                        <a href="{% url 'maths:level_detail' level.id %}">
                            <h3>Year {{ level.level_number }}</h3>
                            <p>{{ level.title }}</p>
                        </a>
                    </div>
                {% empty %}
                    <p class="no-levels">No levels available for this topic.</p>
                {% endfor %}
            </div>
        </div>
    {% empty %}
        <div class="no-topics">
            <h2>No topics available</h2>
            <p>Topics will be added soon!</p>
        </div>
    {% endfor %}
</div>

<div class="back-link">
    <a href="{% url 'maths:dashboard' %}" class="btn btn-primary">Back to Dashboard</a>
</div>

<style>
    .topics-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .topic-card {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .topic-card h2 {
        color: #495057;
        margin-top: 0;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }
    
    .levels-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }
    
    .level-card {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 6px;
        padding: 15px;
        text-align: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .level-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .level-card a {
        text-decoration: none;
        color: #333;
        display: block;
    }
    
    .level-card h3 {
        color: #007bff;
        margin: 0 0 10px 0;
        font-size: 18px;
    }
    
    .level-card p {
        margin: 0;
        color: #666;
        font-size: 14px;
    }
    
    .no-levels {
        grid-column: 1 / -1;
        text-align: center;
        color: #6c757d;
        font-style: italic;
        padding: 20px;
    }
    
    .no-topics {
        text-align: center;
        padding: 40px;
        color: #6c757d;
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        background: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin: 20px 0;
    }
    
    .btn:hover {
        background: #0056b3;
    }
    
    .back-link {
        text-align: center;
        margin-top: 30px;
    }
</style>
{% endblock %}
